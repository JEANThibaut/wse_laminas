<?php $activeMenu = $this->layout()->getVariable('activeMenu') ?? ''; ?>
<!DOCTYPE HTML>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <?= $this->headTitle('Wolf Soft Eure') ?>
    <?= $this->headScript()
        ->prependFile($this->basePath('assets/js/jquery.min.js'))
    ?>
    <?= $this->inlineScript()
        ->prependFile($this->basePath('assets/js/main.js'))
        ->prependFile($this->basePath('assets/js/util.js'))
        ->prependFile($this->basePath('assets/js/jquery.scrolly.min.js'))
        ->prependFile($this->basePath('assets/js/jquery.scrollex.min.js'))
        ->prependFile($this->basePath('assets/js/browser.min.js'))
        ->prependFile($this->basePath('assets/js/breakpoints.min.js'))
    ?>
    <!-- Styles -->
  
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">

    <?= $this->headLink()
        ->prependStylesheet($this->basePath('assets/css/main.css'))
        ->prependStylesheet($this->basePath('assets/css/noscript.css'))
        ->prependStylesheet($this->basePath('assets/css/custom.css'))
    ?>

            <!-- DataTables CSS -->
        <link rel="stylesheet" href="https://cdn.datatables.net/v/dt/dt-2.0.7/datatables.min.css"/>

        <!-- DataTables Vanilla JS -->
        <script src="https://cdn.datatables.net/v/dt/dt-2.0.7/datatables.min.js"></script>

    
</head>

<body class="is-preload">
    <!-- Wrapper -->
    <div id="wrapper" class="fade-in">
        <!-- Header -->
        <header id="header">
        <a href="<?= $this->url('home') ?>" class="logo">
        <img class="logo-default" style="max-height: 50px; max-width:80vw;" src="/images/WSE.png">
        <img class="logo-hover" style="max-height: 50px; max-width:80vw;" src="/images/WSE_hover.png">
    </a>
        </header>

        <!-- Nav -->
        <nav id="nav">
    <ul class="links">
        <?php if ($this->currentUser && $this->currentUser->getIsMember()) : ?>
            <li class="nav-link <?= ($activeMenu === 'membres') ? 'active' : '' ?>">
                <a href="<?= $this->url('home') ?>">Espace membres</a>
            </li>
        <?php endif; ?>

        <li class="nav-link <?= ($activeMenu === '') ? 'active' : '' ?>">
            <a href="<?= $this->url('home') ?>">Accueil</a>
        </li>

        <li class="nav-link <?= ($activeMenu === 'parties') ? 'active' : '' ?>">
            <a href="#">Les parties</a>
        </li>

        <li class="nav-link <?= ($activeMenu === 'photos') ? 'active' : '' ?>">
            <a href="#">Les photos</a>
        </li>

        <li class="nav-link <?= ($activeMenu === 'forum') ? 'active' : '' ?>">
            <a href="#">Forum</a>
        </li>

        <li class="nav-link <?= ($activeMenu === 'faq') ? 'active' : '' ?>">
            <a href="#">F.A.Q / Contact</a>
        </li>
        <?php if ($this->currentUser) : ?>
            <li class="nav-link <?= ($activeMenu === 'profil') ? 'active' : '' ?>">
                <a href="<?= $this->url('profil') ?>">Mon profil</a>
            </li>
        <?php else : ?>
            <li class="nav-link <?= ($activeMenu === 'login') ? 'active' : '' ?>">
                <a href="<?= $this->url('login') ?>">Se connecter / S'inscrire</a>
            </li>
        <?php endif; ?>
    </ul>
</nav>


        <!-- Main -->
        <div id="main">
            <div id="flash-container">
                <?php foreach ($this->flashMessenger()->getMessages() as $message): ?>
                    <div class="alert alert-info flash-message"><?= $this->escapeHtml($message) ?></div>
                <?php endforeach; ?>

                <?php foreach ($this->flashMessenger()->getErrorMessages() as $message): ?>
                    <div class="alert alert-danger flash-message"><?= $this->escapeHtml($message) ?></div>
                <?php endforeach; ?>

                <?php foreach ($this->flashMessenger()->getSuccessMessages() as $message): ?>
                    <div class="alert alert-success flash-message"><?= $this->escapeHtml($message) ?></div>
                <?php endforeach; ?>

                <?php foreach ($this->flashMessenger()->getWarningMessages() as $message): ?>
                    <div class="alert alert-warning flash-message"><?= $this->escapeHtml($message) ?></div>
                <?php endforeach; ?>
                <?php if ($this->flashMessenger()->hasErrorMessages()): ?>
                    <div class="alert alert-danger flash-message">
                        <?php foreach ($this->flashMessenger()->getErrorMessages() as $message): ?>
                            <?= $message ?>
                        <?php endforeach; ?>
                    </div>
                <?php endif; ?>
             </div>
            <?= $this->content ?> 
        </div>

        <!-- Footer -->
        <footer id="footer">
        
  
        </footer>

        <!-- Copyright -->
          <!-- 
        <div id="copyright">
            <ul><li>&copy; Untitled</li><li>Design: <a href="https://html5up.net">HTML5 UP</a></li></ul>
        </div>
            -->
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js" integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq" crossorigin="anonymous"></script>

    <?= $this->inlineScript()
        ->prependFile($this->basePath('assets/js/jquery.min.js'))
        ->prependFile($this->basePath('assets/js/jquery.scrollex.min.js'))
        ->prependFile($this->basePath('assets/js/jquery.scrolly.min.js'))
        ->prependFile($this->basePath('assets/js/browser.min.js'))
        ->prependFile($this->basePath('assets/js/breakpoints.min.js'))
        ->prependFile($this->basePath('assets/js/util.js'))
        ->prependFile($this->basePath('assets/js/main.js'))
        ->prependFile($this->basePath('assets/js/custom.js'))
    ?>

<script>
    // Supprime automatiquement les flash messages au bout de 4 secondes
    setTimeout(function() {
        document.querySelectorAll('.flash-message').forEach(function(el) {
            el.style.transition = 'opacity 0.5s ease';
            el.style.opacity = 0;

            setTimeout(function() {
                el.remove();
            }, 500); // attendre que la transition soit finie
        });
    }, 4000); // 4000 = 4 secondes
</script>


</body>
</html>
