

<style>
    .no-arrow-select {
    appearance: none;         /* Standard */
    -webkit-appearance: none; /* Safari / Chrome */
    -moz-appearance: none;    /* Firefox */
    background-image: none;   /* Masque la flèche */
    padding-right: 1.5rem;
}

.real-select {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;  /* ou une largeur plus précise */
    height: 100%;
    opacity: 0;
    cursor: pointer;
    z-index: 2;
}

.fake-select-icon {
    font-size: 1.5rem;
    cursor: pointer;
    padding: 8px;
    border-radius: 50%;
    transition: background 0.2s;
}

.fake-select-icon.low { color: green; }
.fake-select-icon.medium { color: orange; }
.fake-select-icon.high { color: red; }

.fake-select-icon:hover {
    background-color: rgba(0, 0, 0, 0.05);
}


</style>
<div class="card p-3">
    <h3 class="mb-4">Mon Arsenal</h3>

    <?php foreach ($repliques as $replique): ?>
        <form method="post" action="<?= $this->url('update-replique') ?>" class="mb-2">
            <input type="hidden" name="replique-id" value="<?= $replique->getIdreplique() ?>">

            <div class="row align-items-center g-2">
                <div class="col-5">
                    <input type="text" name="nom_replique" value="<?= htmlentities($replique->getNomReplique()) ?>" class="form-control form-control-sm" placeholder="Nom" required>
                </div>

                <div class="col-3 position-relative" style="height: 40px;">
                    <select name="type_replique" class="real-select" required>
                        <?php
                            $types = ['AEG', 'GBBR', 'Pistolet', 'Sniper', 'Autre'];
                            foreach ($types as $type) {
                                $selected = $type === $replique->getTypeReplique() ? 'selected' : '';
                                echo "<option value=\"$type\" $selected>$type</option>";
                            }
                        ?>
                    </select>

                    <div class="fake-select-icon position-absolute top-50 start-50 translate-middle">
                        <i class="fas fa-gun"></i>
                    </div>
                </div>


                <div class="col-2">
                    <input type="number" name="puissance" value="<?= htmlentities($replique->getPuissance()) ?>" min="0" step="0.01" class="form-control form-control-sm" placeholder="Puissance" required>
                </div>

                <div class="col-2 text-end">
                    <button type="submit" class="btn btn-warning btn-sm w-100">Éditer</button>
                </div>
            </div>
        </form>
    <?php endforeach; ?>
</div>

<div class='card'>
    <h4 class='mb-1'>Ajouter une réplique</h4>

    <form method="post" action="update-replique" id="repliqueForm">
        <div class="row">
            <div class="form-group col-12 mb-3">
                <input type="text" class="form-control" id="nom_replique" name="nom_replique" required placeholder="Nom de de la réplique">
            </div>

            <div class="form-group col-5">
                <select class="form-control" id="type_replique" name="type_replique" required>
                    <option value="">-- Type --</option>
                    <option value="AEG">AEG</option>
                    <option value="GBBR">GBBR</option>
                    <option value="Pistolet">Pistolet</option>
                    <option value="Sniper">Sniper</option>
                    <option value="Autre">Autre</option>
                </select>
            </div>
            <div class="form-group col-5">
                <input type="number" class="form-control" id="puissance" name="puissance" required min="0" step="0.01" placeholder="Puissance(j)">
            </div>
        </div>
            <input type='hidden' name="replique-id" value="-1">        <div class="form-group mt-3">
            <button type="submit" class="btn btn-warning">Ajouter</button>
        </div>
    </form>
</div>

<script>


document.addEventListener('DOMContentLoaded', function () {
    document.querySelectorAll('.real-select').forEach(select => {
        select.addEventListener('change', () => {
            const icon = select.parentElement.querySelector('.fake-select-icon i');
            switch (select.value) {
                case 'AEG': icon.className = 'fas fa-bolt'; break;
                case 'GBBR': icon.className = 'fas fa-fire'; break;
                case 'Sniper': icon.className = 'fas fa-crosshairs'; break;
                default: icon.className = 'fas fa-gun'; break;
            }
        });

        // Initialisation de l'icône selon la valeur actuelle
        const event = new Event('change');
        select.dispatchEvent(event);
    });
});

</script>
    


